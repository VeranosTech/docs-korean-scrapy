

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>셀렉터(Selector) &mdash; Scrapy 1.5.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="색인"
              href="../genindex.html"/>
        <link rel="search" title="검색" href="../search.html"/>
    <link rel="top" title="Scrapy 1.5.0 documentation" href="../index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index_ko.html" class="icon icon-home"> Scrapy
          

          
          </a>

          
            
            
              <div class="version">
                1.5
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">처음 시작하기</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro/overview_ko.html">스크래피(Scrapy) 한눈에 보기</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/install_ko.html">설치 가이드</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/tutorial_ko.html">스크래피 튜토리얼</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/examples_ko.html">예제</a></li>
</ul>
<p class="caption"><span class="caption-text">기본 개념</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="commands_ko.html">커맨드 라인 툴</a></li>
<li class="toctree-l1"><a class="reference internal" href="spiders_ko.html">스파이더(Spider)</a></li>
<li class="toctree-l1"><a class="reference internal" href="selectors.html">Selectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="items.html">Items</a></li>
<li class="toctree-l1"><a class="reference internal" href="loaders.html">Item Loaders</a></li>
<li class="toctree-l1"><a class="reference internal" href="shell.html">Scrapy shell</a></li>
<li class="toctree-l1"><a class="reference internal" href="item-pipeline.html">Item Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="feed-exports.html">Feed exports</a></li>
<li class="toctree-l1"><a class="reference internal" href="request-response.html">Requests and Responses</a></li>
<li class="toctree-l1"><a class="reference internal" href="link-extractors.html">Link Extractors</a></li>
<li class="toctree-l1"><a class="reference internal" href="settings.html">Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="exceptions.html">Exceptions</a></li>
</ul>
<p class="caption"><span class="caption-text">Built-in services</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="logging_ko.html">로깅</a></li>
<li class="toctree-l1"><a class="reference internal" href="stats_ko.html">통계 수집</a></li>
<li class="toctree-l1"><a class="reference internal" href="email.html">Sending e-mail</a></li>
<li class="toctree-l1"><a class="reference internal" href="telnetconsole.html">Telnet Console</a></li>
<li class="toctree-l1"><a class="reference internal" href="webservice.html">Web Service</a></li>
</ul>
<p class="caption"><span class="caption-text">특정 문제 해결하기</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="debug.html">Debugging Spiders</a></li>
<li class="toctree-l1"><a class="reference internal" href="contracts.html">Spiders Contracts</a></li>
<li class="toctree-l1"><a class="reference internal" href="practices.html">Common Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="broad-crawls.html">Broad Crawls</a></li>
<li class="toctree-l1"><a class="reference internal" href="firefox.html">Using Firefox for scraping</a></li>
<li class="toctree-l1"><a class="reference internal" href="firebug.html">Using Firebug for scraping</a></li>
<li class="toctree-l1"><a class="reference internal" href="leaks.html">Debugging memory leaks</a></li>
<li class="toctree-l1"><a class="reference internal" href="media-pipeline.html">Downloading and processing files and images</a></li>
<li class="toctree-l1"><a class="reference internal" href="deploy.html">Deploying Spiders</a></li>
<li class="toctree-l1"><a class="reference internal" href="autothrottle.html">AutoThrottle extension</a></li>
<li class="toctree-l1"><a class="reference internal" href="benchmarking.html">Benchmarking</a></li>
<li class="toctree-l1"><a class="reference internal" href="jobs.html">Jobs: pausing and resuming crawls</a></li>
</ul>
<p class="caption"><span class="caption-text">스크래피 확장</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="architecture.html">Architecture overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="downloader-middleware.html">Downloader Middleware</a></li>
<li class="toctree-l1"><a class="reference internal" href="spider-middleware.html">Spider Middleware</a></li>
<li class="toctree-l1"><a class="reference internal" href="extensions.html">Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="api_ko.html">코어 API</a></li>
<li class="toctree-l1"><a class="reference internal" href="signals.html">Signals</a></li>
<li class="toctree-l1"><a class="reference internal" href="exporters.html">Item Exporters</a></li>
</ul>
<p class="caption"><span class="caption-text">기타</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../news.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing to Scrapy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../versioning.html">Versioning and API Stability</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index_ko.html">Scrapy</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index_ko.html">Docs</a> &raquo;</li>
        
      <li>셀렉터(Selector)</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/VeranosTech/docs-korean-scrapy/blob/docs-korean/docs/topics/selectors_ko.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="selector">
<span id="topics-selectors"></span><h1>셀렉터(Selector)<a class="headerlink" href="#selector" title="제목 주소">¶</a></h1>
<p>웹 페이지를 스크랩할 때, 가장 많이 해야 하는 작업은 HTML 자료로부터 데이터를
추출하는 일이다. 이런 일을 할 수 있는 라이브러리는 몇 가지가 있다:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference external" href="https://www.crummy.com/software/BeautifulSoup/">BeautifulSoup</a>는 파이썬(Python) 프로그래머 사이에서 가장 인기있는 웹 스크랩핑
라이브러리로 HTML의 구조를 기반으로 파이썬 객체를 생성하고 나쁜 마크업을 꽤 잘
처리한다. 하지만 한 가지 단점이 있는데 느리다는 것이다.</li>
<li><a class="reference external" href="http://lxml.de/">lxml</a>는 XML 파싱 라이브러리로 (HTML도 파싱할 수 있다) <a class="reference external" href="https://docs.python.org/2/library/xml.etree.elementtree.html">ElementTree</a>을 기반으로
하는 파이썬스러운 API다. (lxml은 파이썬 기본 라이브러리는 아니다.)</li>
</ul>
</div></blockquote>
<p>스크래피는 자체적인 추출 매커니즘을 가지고 있다. 이 매커니즘은 <a class="reference external" href="https://www.w3.org/TR/xpath">XPath</a>나 <a class="reference external" href="https://www.w3.org/TR/selectors">CSS</a>표현으로
지정된 HTML 문서의 특정 부분을 선택하기 때문에 셀렉터라고 불린다.</p>
<p><a class="reference external" href="https://www.w3.org/TR/xpath">XPath</a>는 XML 문서에 있는 노드를 선택하는 언어이며 HTML에서도 사용할 수 있다.
<a class="reference external" href="https://www.w3.org/TR/selectors">CSS</a>는 HTML 문서에 스타일을 적용시키기 위한 언어로 그 스타일과 특정한 HTML 요소를
연관시키는 셀렉터를 정의한다.</p>
<p>스크래피 셀렉터는 <a class="reference external" href="http://lxml.de/">lxml</a> 라이브러리를 기반으로 만들어져서 속도와 파싱의 정확도 면에서
매우 유사하다.</p>
<p>이 페이지는 셀렉터가 작동하는 방식과 매우 작고 간단한 API에 대해 설명했다.
(<a class="reference external" href="http://lxml.de/">lxml</a> API는 마크업 문서를 선택하는 것 뿐만 아니라 다른 많은 작업에서 사용되는
라이브러리이기 때문에 훨씬 크다.)</p>
<p>셀렉터 API에 대한 완전한 레퍼런스는 다음을 참고하라.
<a class="reference internal" href="#topics-selectors-ref"><span class="std std-ref">Selector reference</span></a></p>
<div class="section" id="id1">
<h2>셀렉터 사용하기<a class="headerlink" href="#id1" title="제목 주소">¶</a></h2>
<div class="section" id="id2">
<h3>셀렉터 생성하기<a class="headerlink" href="#id2" title="제목 주소">¶</a></h3>
<p>스크래피 셀렉터는 <strong>텍스트</strong> 또는 <a class="reference internal" href="request-response_ko.html#scrapy.http.TextResponse" title="scrapy.http.TextResponse"><code class="xref py py-class docutils literal"><span class="pre">TextResponse</span></code></a> 객체를
전달해서 생성된 <a class="reference internal" href="#scrapy.selector.Selector" title="scrapy.selector.Selector"><code class="xref py py-class docutils literal"><span class="pre">Selector</span></code></a> 클래스의 인스턴스이다
셀렉터는 입력 타입에 기반해 자동으로 최고의 파싱 규칙 (XML vs HTML)을 선택한다:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">scrapy.selector</span> <span class="kn">import</span> <span class="n">Selector</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">scrapy.http</span> <span class="kn">import</span> <span class="n">HtmlResponse</span>
</pre></div>
</div>
<p>텍트스로 생성하기:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">body</span> <span class="o">=</span> <span class="s1">&#39;&lt;html&gt;&lt;body&gt;&lt;span&gt;good&lt;/span&gt;&lt;/body&gt;&lt;/html&gt;&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Selector</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">body</span><span class="p">)</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s1">&#39;//span/text()&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
<span class="go">[u&#39;good&#39;]</span>
</pre></div>
</div>
<p>리스펀스로 생성하기:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">HtmlResponse</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="s1">&#39;http://example.com&#39;</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Selector</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">response</span><span class="p">)</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s1">&#39;//span/text()&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
<span class="go">[u&#39;good&#39;]</span>
</pre></div>
</div>
<p>편의를 위해, 리스펀스 객체는 <cite>.selector</cite> 속성으로 셀렉터를 사용할 수 있다,
가능할 때 이 방법을 이용하는 것은 전혀 문제가 없다:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="o">.</span><span class="n">selector</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s1">&#39;//span/text()&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
<span class="go">[u&#39;good&#39;]</span>
</pre></div>
</div>
</div>
<div class="section" id="id3">
<h3>셀렉터 사용하기<a class="headerlink" href="#id3" title="제목 주소">¶</a></h3>
<p>셀렉터를 사요하는 방법을 설명하기 위해서 우리는 (인터렉티브한 테스팅을 제공하는) <cite>Scrapy Shell</cite>과
스크래피 문서 서버에 있는 예제 페이지를 활용할 것이다:</p>
<blockquote>
<div><a class="reference external" href="https://doc.scrapy.org/en/latest/_static/selectors-sample1.html">https://doc.scrapy.org/en/latest/_static/selectors-sample1.html</a></div></blockquote>
<p id="topics-selectors-htmlcode">아래는 페이지의 HTML 코드다:</p>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
 <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">base</span> <span class="na">href</span><span class="o">=</span><span class="s">&#39;http://example.com/&#39;</span> <span class="p">/&gt;</span>
  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Example website<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
 <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
 <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#39;images&#39;</span><span class="p">&gt;</span>
   <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#39;image1.html&#39;</span><span class="p">&gt;</span>Name: My image 1 <span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&#39;image1_thumb.jpg&#39;</span> <span class="p">/&gt;&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
   <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#39;image2.html&#39;</span><span class="p">&gt;</span>Name: My image 2 <span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&#39;image2_thumb.jpg&#39;</span> <span class="p">/&gt;&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
   <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#39;image3.html&#39;</span><span class="p">&gt;</span>Name: My image 3 <span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&#39;image3_thumb.jpg&#39;</span> <span class="p">/&gt;&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
   <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#39;image4.html&#39;</span><span class="p">&gt;</span>Name: My image 4 <span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&#39;image4_thumb.jpg&#39;</span> <span class="p">/&gt;&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
   <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#39;image5.html&#39;</span><span class="p">&gt;</span>Name: My image 5 <span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&#39;image5_thumb.jpg&#39;</span> <span class="p">/&gt;&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
 <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>우선 셸(shell)을 열자:</p>
<div class="highlight-sh"><div class="highlight"><pre><span></span>scrapy shell https://doc.scrapy.org/en/latest/_static/selectors-sample1.html
</pre></div>
</div>
<p>셸이 로드되면 사용자는 <code class="docutils literal"><span class="pre">response</span></code> 셸 변수를 써서 사용 가능한 리스펀스와
<code class="docutils literal"><span class="pre">response.selector</span></code> 속성으로 붙은 셀렉터를 갖게 된다.</p>
<p>HTML을 처리하고 있기 대문에, 셀렉터는 자동적으로 HTML 파서를 사용한다.</p>
<p>페이지의 <a class="reference internal" href="#topics-selectors-htmlcode"><span class="std std-ref">HTML 코드</span></a>를 보고 타이틀 태그에 있는 텍스트를
선택하기 위한 XPath 만들어 보자:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="o">.</span><span class="n">selector</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s1">&#39;//title/text()&#39;</span><span class="p">)</span>
<span class="go">[&lt;Selector (text) xpath=//title/text()&gt;]</span>
</pre></div>
</div>
<p>XPath나 CSS를 사용해 리스펀스를 쿼리하는 것은 매우 일반적인 일이라서 리스펀스는
두 숏컷을 포함하고 있다. <code class="docutils literal"><span class="pre">response.xpath()</span></code>, <code class="docutils literal"><span class="pre">response.css()</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s1">&#39;//title/text()&#39;</span><span class="p">)</span>
<span class="go">[&lt;Selector (text) xpath=//title/text()&gt;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="o">.</span><span class="n">css</span><span class="p">(</span><span class="s1">&#39;title::text&#39;</span><span class="p">)</span>
<span class="go">[&lt;Selector (text) xpath=//title/text()&gt;]</span>
</pre></div>
</div>
<p>보다시피, <code class="docutils literal"><span class="pre">.xpath()</span></code>와 <code class="docutils literal"><span class="pre">.css()</span></code> 메서드는
<a class="reference internal" href="#scrapy.selector.SelectorList" title="scrapy.selector.SelectorList"><code class="xref py py-class docutils literal"><span class="pre">SelectorList</span></code></a> 인스턴스를 반환하며, 이는 새로운
셀렉터 리스트다. 이 API는 중첩된 데이터를 빠르게 선택하는 데 사용할 수 있다:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="o">.</span><span class="n">css</span><span class="p">(</span><span class="s1">&#39;img&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s1">&#39;@src&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
<span class="go">[u&#39;image1_thumb.jpg&#39;,</span>
<span class="go"> u&#39;image2_thumb.jpg&#39;,</span>
<span class="go"> u&#39;image3_thumb.jpg&#39;,</span>
<span class="go"> u&#39;image4_thumb.jpg&#39;,</span>
<span class="go"> u&#39;image5_thumb.jpg&#39;]</span>
</pre></div>
</div>
<p>텍스트 데이터를 실제로 추출하려면 반드시 셀렉터의 <code class="docutils literal"><span class="pre">.extract()</span></code> 메서드를 아래처럼 호출해야 한다:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s1">&#39;//title/text()&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
<span class="go">[u&#39;Example website&#39;]</span>
</pre></div>
</div>
<p>가장 첫 번째에 메치된 요소를 추출하려면 셀렉터의 <code class="docutils literal"><span class="pre">.extract_first()</span></code> 메서드를 호출해야 한다.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s1">&#39;//div[@id=&quot;images&quot;]/a/text()&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">extract_first</span><span class="p">()</span>
<span class="go">u&#39;Name: My image 1 &#39;</span>
</pre></div>
</div>
<p>찾아진 요소가 없으면 <code class="docutils literal"><span class="pre">None</span></code>을 반환한다:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s1">&#39;//div[@id=&quot;not-exists&quot;]/text()&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">extract_first</span><span class="p">()</span> <span class="ow">is</span> <span class="bp">None</span>
<span class="go">True</span>
</pre></div>
</div>
<p>기본 리턴 값을 <code class="docutils literal"><span class="pre">None</span></code> 대신에 주어진 인자로 반환시킬 수 있다.:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s1">&#39;//div[@id=&quot;not-exists&quot;]/text()&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">extract_first</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s1">&#39;not-found&#39;</span><span class="p">)</span>
<span class="go">&#39;not-found&#39;</span>
</pre></div>
</div>
<p>CSS 셀렉터는 CSS3 수에도-요소(pseudo-element)를 사용해서 텍스트와 속성 노드를
선택할 수 있다:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="o">.</span><span class="n">css</span><span class="p">(</span><span class="s1">&#39;title::text&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
<span class="go">[u&#39;Example website&#39;]</span>
</pre></div>
</div>
<p>이제 베이스 URL과 몇 가지 이미지 링크를 얻어볼 것이다:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s1">&#39;//base/@href&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
<span class="go">[u&#39;http://example.com/&#39;]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="o">.</span><span class="n">css</span><span class="p">(</span><span class="s1">&#39;base::attr(href)&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
<span class="go">[u&#39;http://example.com/&#39;]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s1">&#39;//a[contains(@href, &quot;image&quot;)]/@href&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
<span class="go">[u&#39;image1.html&#39;,</span>
<span class="go"> u&#39;image2.html&#39;,</span>
<span class="go"> u&#39;image3.html&#39;,</span>
<span class="go"> u&#39;image4.html&#39;,</span>
<span class="go"> u&#39;image5.html&#39;]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="o">.</span><span class="n">css</span><span class="p">(</span><span class="s1">&#39;a[href*=image]::attr(href)&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
<span class="go">[u&#39;image1.html&#39;,</span>
<span class="go"> u&#39;image2.html&#39;,</span>
<span class="go"> u&#39;image3.html&#39;,</span>
<span class="go"> u&#39;image4.html&#39;,</span>
<span class="go"> u&#39;image5.html&#39;]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s1">&#39;//a[contains(@href, &quot;image&quot;)]/img/@src&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
<span class="go">[u&#39;image1_thumb.jpg&#39;,</span>
<span class="go"> u&#39;image2_thumb.jpg&#39;,</span>
<span class="go"> u&#39;image3_thumb.jpg&#39;,</span>
<span class="go"> u&#39;image4_thumb.jpg&#39;,</span>
<span class="go"> u&#39;image5_thumb.jpg&#39;]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="o">.</span><span class="n">css</span><span class="p">(</span><span class="s1">&#39;a[href*=image] img::attr(src)&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
<span class="go">[u&#39;image1_thumb.jpg&#39;,</span>
<span class="go"> u&#39;image2_thumb.jpg&#39;,</span>
<span class="go"> u&#39;image3_thumb.jpg&#39;,</span>
<span class="go"> u&#39;image4_thumb.jpg&#39;,</span>
<span class="go"> u&#39;image5_thumb.jpg&#39;]</span>
</pre></div>
</div>
</div>
<div class="section" id="topics-selectors-nesting-selectors">
<span id="id4"></span><h3>셀렉터 중첩하기<a class="headerlink" href="#topics-selectors-nesting-selectors" title="제목 주소">¶</a></h3>
<p>선택 메서드(<code class="docutils literal"><span class="pre">.xpath()</span></code> 또는 <code class="docutils literal"><span class="pre">.css()</span></code>)는 같은 타입의 셀렉터 리스트를 반환한다,
따라서 그 셀렉터에도 선택 메서드를 호출할 수 있다. 아래는 그 예시다:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">links</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s1">&#39;//a[contains(@href, &quot;image&quot;)]&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">links</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
<span class="go">[u&#39;&lt;a href=&quot;image1.html&quot;&gt;Name: My image 1 &lt;br&gt;&lt;img src=&quot;image1_thumb.jpg&quot;&gt;&lt;/a&gt;&#39;,</span>
<span class="go"> u&#39;&lt;a href=&quot;image2.html&quot;&gt;Name: My image 2 &lt;br&gt;&lt;img src=&quot;image2_thumb.jpg&quot;&gt;&lt;/a&gt;&#39;,</span>
<span class="go"> u&#39;&lt;a href=&quot;image3.html&quot;&gt;Name: My image 3 &lt;br&gt;&lt;img src=&quot;image3_thumb.jpg&quot;&gt;&lt;/a&gt;&#39;,</span>
<span class="go"> u&#39;&lt;a href=&quot;image4.html&quot;&gt;Name: My image 4 &lt;br&gt;&lt;img src=&quot;image4_thumb.jpg&quot;&gt;&lt;/a&gt;&#39;,</span>
<span class="go"> u&#39;&lt;a href=&quot;image5.html&quot;&gt;Name: My image 5 &lt;br&gt;&lt;img src=&quot;image5_thumb.jpg&quot;&gt;&lt;/a&gt;&#39;]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">link</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">links</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">args</span> <span class="o">=</span> <span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">link</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s1">&#39;@href&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">extract</span><span class="p">(),</span> <span class="n">link</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s1">&#39;img/@src&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">extract</span><span class="p">())</span>
<span class="gp">... </span>    <span class="k">print</span> <span class="s1">&#39;Link number </span><span class="si">%d</span><span class="s1"> points to url </span><span class="si">%s</span><span class="s1"> and image </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">args</span>

<span class="go">Link number 0 points to url [u&#39;image1.html&#39;] and image [u&#39;image1_thumb.jpg&#39;]</span>
<span class="go">Link number 1 points to url [u&#39;image2.html&#39;] and image [u&#39;image2_thumb.jpg&#39;]</span>
<span class="go">Link number 2 points to url [u&#39;image3.html&#39;] and image [u&#39;image3_thumb.jpg&#39;]</span>
<span class="go">Link number 3 points to url [u&#39;image4.html&#39;] and image [u&#39;image4_thumb.jpg&#39;]</span>
<span class="go">Link number 4 points to url [u&#39;image5.html&#39;] and image [u&#39;image5_thumb.jpg&#39;]</span>
</pre></div>
</div>
</div>
<div class="section" id="id5">
<h3>정규 표현식으로 셀렉터 사용하기<a class="headerlink" href="#id5" title="제목 주소">¶</a></h3>
<p><a class="reference internal" href="#scrapy.selector.Selector" title="scrapy.selector.Selector"><code class="xref py py-class docutils literal"><span class="pre">Selector</span></code></a>는 정규식을 사용한 데이터 추출을 위해 <code class="docutils literal"><span class="pre">.re()</span></code> 메서드를
제공한다. 그러나 <code class="docutils literal"><span class="pre">.xpath()</span></code>나 <code class="docutils literal"><span class="pre">.css()</span></code> 메서드와는 다르게, <code class="docutils literal"><span class="pre">.re()</span></code>는 유니코드 문자열 리스트를
반환한다. 따라서 중첩된 <code class="docutils literal"><span class="pre">.re()</span></code> 호출을 생성할 수 없다.</p>
<p>아래는 위의 <a class="reference internal" href="#topics-selectors-htmlcode"><span class="std std-ref">HTML code</span></a>에서 이미지 이름을 추출하는 예제다:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s1">&#39;//a[contains(@href, &quot;image&quot;)]/text()&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">re</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;Name:\s*(.*)&#39;</span><span class="p">)</span>
<span class="go">[u&#39;My image 1&#39;,</span>
<span class="go"> u&#39;My image 2&#39;,</span>
<span class="go"> u&#39;My image 3&#39;,</span>
<span class="go"> u&#39;My image 4&#39;,</span>
<span class="go"> u&#39;My image 5&#39;]</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">.re()</span></code>를 위해 <code class="docutils literal"><span class="pre">.extract_first()</span></code>를 반복하는 추가적인 헬퍼가 있으며,
이름은 <code class="docutils literal"><span class="pre">.re_first()</span></code>다. 첫 번째로 매치되는 문자열을 추출하기 위해 사용할 수 있다:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s1">&#39;//a[contains(@href, &quot;image&quot;)]/text()&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">re_first</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;Name:\s*(.*)&#39;</span><span class="p">)</span>
<span class="go">u&#39;My image 1&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="topics-selectors-relative-xpaths">
<span id="id6"></span><h3>상대 XPath로 작업하기<a class="headerlink" href="#topics-selectors-relative-xpaths" title="제목 주소">¶</a></h3>
<p>만약 셀렉터를 중첩하면서 <code class="docutils literal"><span class="pre">/</span></code>로 시작하는 XPath를 사용하는 경우, 그 XPath는 문서에 대해
절대적이며 호출되는 <code class="docutils literal"><span class="pre">Selector</span></code>에 대해 상대적이지 않다.</p>
<p>예를 들어 <code class="docutils literal"><span class="pre">&lt;div&gt;</span></code> 요소에 있는 모든 <code class="docutils literal"><span class="pre">&lt;p&gt;</span></code> 요소를 추출하고 싶다고 하자.
우선, 모든 <code class="docutils literal"><span class="pre">&lt;div&gt;</span></code> 요소를 얻는다:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">divs</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s1">&#39;//div&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>처음에, 아래와 같은 접근방식을 사용하려고 시도할 수도 있는데, 이는 잘못됐다,
왜냐하면 <code class="docutils literal"><span class="pre">&lt;div&gt;</span></code> 요소에 있는 것 뿐만 아니라 문서에 있는 모든 <code class="docutils literal"><span class="pre">&lt;p&gt;</span></code> 요소를 다 추출하기
때문이다:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">divs</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s1">&#39;//p&#39;</span><span class="p">):</span>  <span class="c1"># this is wrong - gets all &lt;p&gt; from the whole document</span>
<span class="gp">... </span>    <span class="k">print</span> <span class="n">p</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
</pre></div>
</div>
<p>아래가 적절한 방식이다 (<code class="docutils literal"><span class="pre">.//p</span></code> XPath 가장 앞에 있는 점을 명심하기 바란다):</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">divs</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s1">&#39;.//p&#39;</span><span class="p">):</span>  <span class="c1"># extracts all &lt;p&gt; inside</span>
<span class="gp">... </span>    <span class="k">print</span> <span class="n">p</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
</pre></div>
</div>
<p>다른 일반적인 경우는 모든 <code class="docutils literal"><span class="pre">&lt;p&gt;</span></code> 자식을 추출하는 것이다:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">divs</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s1">&#39;p&#39;</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">print</span> <span class="n">p</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
</pre></div>
</div>
<p>상대적 XPath에 관한 자세한 정보는 XPath 설명서에 있는 <a class="reference external" href="https://www.w3.org/TR/xpath#location-paths">Location Paths</a>를
참고하라.</p>
</div>
<div class="section" id="topics-selectors-xpath-variables">
<span id="id7"></span><h3>XPath 표현식의 변수<a class="headerlink" href="#topics-selectors-xpath-variables" title="제목 주소">¶</a></h3>
<p>XPath는 XPath 표현식에서 <code class="docutils literal"><span class="pre">$somevariable</span></code> 신택스를 사용해
변수를 참조하는 것을 허용한다. 이는 쿼리 내부의 인자를 <code class="docutils literal"><span class="pre">?</span></code> 같은 플레이스홀더로
대체해놓고 나중에 쿼리에 값을 전달하는 SQL 세계의 파라미터로 나타내진 쿼리 또는 준비된 명령문과 꽤 흡사하다.</p>
<p>아래는 (이전에 보여줬었던) 하드 코딩 없이 &quot;id&quot; 속성 값에 기반한 요소와 일치시키는 예제다:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># `$val` used in the expression, a `val` argument needs to be passed</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s1">&#39;//div[@id=$val]/a/text()&#39;</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="s1">&#39;images&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">extract_first</span><span class="p">()</span>
<span class="go">u&#39;Name: My image 1 &#39;</span>
</pre></div>
</div>
<p>아래는 다섯 개의 <code class="docutils literal"><span class="pre">&lt;a&gt;</span></code> 자식을 포함하는 <code class="docutils literal"><span class="pre">&lt;div&gt;</span></code>  태그의 &quot;id&quot; 속성을 찾는
또 다른 예제다 (여기서는 integer인 <code class="docutils literal"><span class="pre">5</span></code>를 전달했다):</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s1">&#39;//div[count(a)=$cnt]/@id&#39;</span><span class="p">,</span> <span class="n">cnt</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">extract_first</span><span class="p">()</span>
<span class="go">u&#39;images&#39;</span>
</pre></div>
</div>
<p>모든 변수 참조는 <code class="docutils literal"><span class="pre">.xpath()</span></code>를 호출할 때 바인드하는 값이 있어야 한다.
(그렇지 않으면 <code class="docutils literal"><span class="pre">ValueError:</span> <span class="pre">XPath</span> <span class="pre">error:</span></code> 예외가 발생한다).
이는 네임드 인자를 필요한 만큼 전달해서 실행한다.</p>
<p>스크래피 셀렉터를 강력하게 해주는 <a class="reference external" href="https://parsel.readthedocs.io/">parsel</a> 라이브러리에 관한 자세한 내용과 예제는 <a class="reference external" href="https://parsel.readthedocs.io/en/latest/usage.html#variables-in-xpath-expressions">XPath 변수</a>에 나와있다.</p>
</div>
<div class="section" id="exslt">
<h3>EXSLT 확장 사용하기<a class="headerlink" href="#exslt" title="제목 주소">¶</a></h3>
<p><a class="reference external" href="http://lxml.de/">lxml</a> 위에 빌드되어서, 스크래피 셀렉터는 <a class="reference external" href="http://exslt.org/">EXSLT</a> 확장도 지원하며
XPath 표현식에서 사용할 수 있는 사전 등록된 네임스페이스가 존재한다:</p>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="56%" />
<col width="35%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">prefix</th>
<th class="head">namespace</th>
<th class="head">usage</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>re</td>
<td>http://exslt.org/regular-expressions</td>
<td><a class="reference external" href="http://exslt.org/regexp/index.html">regular expressions</a></td>
</tr>
<tr class="row-odd"><td>set</td>
<td>http://exslt.org/sets</td>
<td><a class="reference external" href="http://exslt.org/set/index.html">set manipulation</a></td>
</tr>
</tbody>
</table>
<div class="section" id="id9">
<h4>정규 표현식<a class="headerlink" href="#id9" title="제목 주소">¶</a></h4>
<p>예를 들어 <code class="docutils literal"><span class="pre">test()</span></code> 함수는, XPath의 <code class="docutils literal"><span class="pre">starts-with()</span></code> 또는 <code class="docutils literal"><span class="pre">contains()</span></code>가 충분하지 않을 때
꽤 유용하다.</p>
<p>숫자로 끝나는 &quot;class&quot; 속성을 가진 리스트 아이템에서 링크를 선택하는 예제:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">scrapy</span> <span class="kn">import</span> <span class="n">Selector</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">doc</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="gp">... </span><span class="s2">&lt;div&gt;</span>
<span class="gp">... </span><span class="s2">    &lt;ul&gt;</span>
<span class="gp">... </span><span class="s2">        &lt;li class=&quot;item-0&quot;&gt;&lt;a href=&quot;link1.html&quot;&gt;first item&lt;/a&gt;&lt;/li&gt;</span>
<span class="gp">... </span><span class="s2">        &lt;li class=&quot;item-1&quot;&gt;&lt;a href=&quot;link2.html&quot;&gt;second item&lt;/a&gt;&lt;/li&gt;</span>
<span class="gp">... </span><span class="s2">        &lt;li class=&quot;item-inactive&quot;&gt;&lt;a href=&quot;link3.html&quot;&gt;third item&lt;/a&gt;&lt;/li&gt;</span>
<span class="gp">... </span><span class="s2">        &lt;li class=&quot;item-1&quot;&gt;&lt;a href=&quot;link4.html&quot;&gt;fourth item&lt;/a&gt;&lt;/li&gt;</span>
<span class="gp">... </span><span class="s2">        &lt;li class=&quot;item-0&quot;&gt;&lt;a href=&quot;link5.html&quot;&gt;fifth item&lt;/a&gt;&lt;/li&gt;</span>
<span class="gp">... </span><span class="s2">    &lt;/ul&gt;</span>
<span class="gp">... </span><span class="s2">&lt;/div&gt;</span>
<span class="gp">... </span><span class="s2">&quot;&quot;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sel</span> <span class="o">=</span> <span class="n">Selector</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">doc</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;html&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sel</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s1">&#39;//li//@href&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
<span class="go">[u&#39;link1.html&#39;, u&#39;link2.html&#39;, u&#39;link3.html&#39;, u&#39;link4.html&#39;, u&#39;link5.html&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sel</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s1">&#39;//li[re:test(@class, &quot;item-\d$&quot;)]//@href&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
<span class="go">[u&#39;link1.html&#39;, u&#39;link2.html&#39;, u&#39;link4.html&#39;, u&#39;link5.html&#39;]</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">경고</p>
<p class="last">C 라이브러리 <code class="docutils literal"><span class="pre">libxslt</span></code>는 기본적으로 EXSLT 정규 표현식을 지원하지 않는다.
따라서 <a class="reference external" href="http://lxml.de/">lxml</a>의 구현은 파이썬의 <code class="docutils literal"><span class="pre">re</span></code> 모듈을 사용한다.
그러므로 정규식 함수를 XPath 표현식에서 사용하는 것은 성능 측면에서 작은 패널티를
주게 된다.</p>
</div>
</div>
<div class="section" id="id10">
<h4>세트 작업<a class="headerlink" href="#id10" title="제목 주소">¶</a></h4>
<p>텍스트 요소를 추출하기 전에 문서트리의 일부를 제외시키는 것이 편리할 수 있다.</p>
<p>아이템스코프(itemscope)와 대응하는 아이템프롭(itemprop)이 그룹이 있는 마이크로데이터를 추출하는 예제
(샘플 컨텐츠는 <a class="reference external" href="http://schema.org/Product">http://schema.org/Product</a>에서 가져왔다:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">doc</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="gp">... </span><span class="s2">&lt;div itemscope itemtype=&quot;http://schema.org/Product&quot;&gt;</span>
<span class="gp">... </span><span class="s2">  &lt;span itemprop=&quot;name&quot;&gt;Kenmore White 17&quot; Microwave&lt;/span&gt;</span>
<span class="gp">... </span><span class="s2">  &lt;img src=&quot;kenmore-microwave-17in.jpg&quot; alt=&#39;Kenmore 17&quot; Microwave&#39; /&gt;</span>
<span class="gp">... </span><span class="s2">  &lt;div itemprop=&quot;aggregateRating&quot;</span>
<span class="gp">... </span><span class="s2">    itemscope itemtype=&quot;http://schema.org/AggregateRating&quot;&gt;</span>
<span class="gp">... </span><span class="s2">   Rated &lt;span itemprop=&quot;ratingValue&quot;&gt;3.5&lt;/span&gt;/5</span>
<span class="gp">... </span><span class="s2">   based on &lt;span itemprop=&quot;reviewCount&quot;&gt;11&lt;/span&gt; customer reviews</span>
<span class="gp">... </span><span class="s2">  &lt;/div&gt;</span>
<span class="gp">...</span><span class="s2"></span>
<span class="gp">... </span><span class="s2">  &lt;div itemprop=&quot;offers&quot; itemscope itemtype=&quot;http://schema.org/Offer&quot;&gt;</span>
<span class="gp">... </span><span class="s2">    &lt;span itemprop=&quot;price&quot;&gt;$55.00&lt;/span&gt;</span>
<span class="gp">... </span><span class="s2">    &lt;link itemprop=&quot;availability&quot; href=&quot;http://schema.org/InStock&quot; /&gt;In stock</span>
<span class="gp">... </span><span class="s2">  &lt;/div&gt;</span>
<span class="gp">...</span><span class="s2"></span>
<span class="gp">... </span><span class="s2">  Product description:</span>
<span class="gp">... </span><span class="s2">  &lt;span itemprop=&quot;description&quot;&gt;0.7 cubic feet countertop microwave.</span>
<span class="gp">... </span><span class="s2">  Has six preset cooking categories and convenience features like</span>
<span class="gp">... </span><span class="s2">  Add-A-Minute and Child Lock.&lt;/span&gt;</span>
<span class="gp">...</span><span class="s2"></span>
<span class="gp">... </span><span class="s2">  Customer reviews:</span>
<span class="gp">...</span><span class="s2"></span>
<span class="gp">... </span><span class="s2">  &lt;div itemprop=&quot;review&quot; itemscope itemtype=&quot;http://schema.org/Review&quot;&gt;</span>
<span class="gp">... </span><span class="s2">    &lt;span itemprop=&quot;name&quot;&gt;Not a happy camper&lt;/span&gt; -</span>
<span class="gp">... </span><span class="s2">    by &lt;span itemprop=&quot;author&quot;&gt;Ellie&lt;/span&gt;,</span>
<span class="gp">... </span><span class="s2">    &lt;meta itemprop=&quot;datePublished&quot; content=&quot;2011-04-01&quot;&gt;April 1, 2011</span>
<span class="gp">... </span><span class="s2">    &lt;div itemprop=&quot;reviewRating&quot; itemscope itemtype=&quot;http://schema.org/Rating&quot;&gt;</span>
<span class="gp">... </span><span class="s2">      &lt;meta itemprop=&quot;worstRating&quot; content = &quot;1&quot;&gt;</span>
<span class="gp">... </span><span class="s2">      &lt;span itemprop=&quot;ratingValue&quot;&gt;1&lt;/span&gt;/</span>
<span class="gp">... </span><span class="s2">      &lt;span itemprop=&quot;bestRating&quot;&gt;5&lt;/span&gt;stars</span>
<span class="gp">... </span><span class="s2">    &lt;/div&gt;</span>
<span class="gp">... </span><span class="s2">    &lt;span itemprop=&quot;description&quot;&gt;The lamp burned out and now I have to replace</span>
<span class="gp">... </span><span class="s2">    it. &lt;/span&gt;</span>
<span class="gp">... </span><span class="s2">  &lt;/div&gt;</span>
<span class="gp">...</span><span class="s2"></span>
<span class="gp">... </span><span class="s2">  &lt;div itemprop=&quot;review&quot; itemscope itemtype=&quot;http://schema.org/Review&quot;&gt;</span>
<span class="gp">... </span><span class="s2">    &lt;span itemprop=&quot;name&quot;&gt;Value purchase&lt;/span&gt; -</span>
<span class="gp">... </span><span class="s2">    by &lt;span itemprop=&quot;author&quot;&gt;Lucas&lt;/span&gt;,</span>
<span class="gp">... </span><span class="s2">    &lt;meta itemprop=&quot;datePublished&quot; content=&quot;2011-03-25&quot;&gt;March 25, 2011</span>
<span class="gp">... </span><span class="s2">    &lt;div itemprop=&quot;reviewRating&quot; itemscope itemtype=&quot;http://schema.org/Rating&quot;&gt;</span>
<span class="gp">... </span><span class="s2">      &lt;meta itemprop=&quot;worstRating&quot; content = &quot;1&quot;/&gt;</span>
<span class="gp">... </span><span class="s2">      &lt;span itemprop=&quot;ratingValue&quot;&gt;4&lt;/span&gt;/</span>
<span class="gp">... </span><span class="s2">      &lt;span itemprop=&quot;bestRating&quot;&gt;5&lt;/span&gt;stars</span>
<span class="gp">... </span><span class="s2">    &lt;/div&gt;</span>
<span class="gp">... </span><span class="s2">    &lt;span itemprop=&quot;description&quot;&gt;Great microwave for the price. It is small and</span>
<span class="gp">... </span><span class="s2">    fits in my apartment.&lt;/span&gt;</span>
<span class="gp">... </span><span class="s2">  &lt;/div&gt;</span>
<span class="gp">... </span><span class="s2">  ...</span>
<span class="gp">... </span><span class="s2">&lt;/div&gt;</span>
<span class="gp">... </span><span class="s2">&quot;&quot;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sel</span> <span class="o">=</span> <span class="n">Selector</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">doc</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;html&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">scope</span> <span class="ow">in</span> <span class="n">sel</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s1">&#39;//div[@itemscope]&#39;</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">print</span> <span class="s2">&quot;current scope:&quot;</span><span class="p">,</span> <span class="n">scope</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s1">&#39;@itemtype&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
<span class="gp">... </span>    <span class="n">props</span> <span class="o">=</span> <span class="n">scope</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="gp">... </span><span class="s1">                set:difference(./descendant::*/@itemprop,</span>
<span class="gp">... </span><span class="s1">                               .//*[@itemscope]/*/@itemprop)&#39;&#39;&#39;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">print</span> <span class="s2">&quot;    properties:&quot;</span><span class="p">,</span> <span class="n">props</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
<span class="gp">... </span>    <span class="k">print</span>

<span class="go">current scope: [u&#39;http://schema.org/Product&#39;]</span>
<span class="go">    properties: [u&#39;name&#39;, u&#39;aggregateRating&#39;, u&#39;offers&#39;, u&#39;description&#39;, u&#39;review&#39;, u&#39;review&#39;]</span>

<span class="go">current scope: [u&#39;http://schema.org/AggregateRating&#39;]</span>
<span class="go">    properties: [u&#39;ratingValue&#39;, u&#39;reviewCount&#39;]</span>

<span class="go">current scope: [u&#39;http://schema.org/Offer&#39;]</span>
<span class="go">    properties: [u&#39;price&#39;, u&#39;availability&#39;]</span>

<span class="go">current scope: [u&#39;http://schema.org/Review&#39;]</span>
<span class="go">    properties: [u&#39;name&#39;, u&#39;author&#39;, u&#39;datePublished&#39;, u&#39;reviewRating&#39;, u&#39;description&#39;]</span>

<span class="go">current scope: [u&#39;http://schema.org/Rating&#39;]</span>
<span class="go">    properties: [u&#39;worstRating&#39;, u&#39;ratingValue&#39;, u&#39;bestRating&#39;]</span>

<span class="go">current scope: [u&#39;http://schema.org/Review&#39;]</span>
<span class="go">    properties: [u&#39;name&#39;, u&#39;author&#39;, u&#39;datePublished&#39;, u&#39;reviewRating&#39;, u&#39;description&#39;]</span>

<span class="go">current scope: [u&#39;http://schema.org/Rating&#39;]</span>
<span class="go">    properties: [u&#39;worstRating&#39;, u&#39;ratingValue&#39;, u&#39;bestRating&#39;]</span>

<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>위에서 우리는 일단 <code class="docutils literal"><span class="pre">itemscope</span></code> 요소에 대해 반복을 했고, 각각에 대해
모든 <code class="docutils literal"><span class="pre">itemprops</span></code> 요소를 찾았다. 그 다음 또다른 <code class="docutils literal"><span class="pre">itemscope</span></code> 안에 있는 것들을
제외시켰다.</p>
</div>
</div>
<div class="section" id="id12">
<h3>XPath 팁<a class="headerlink" href="#id12" title="제목 주소">¶</a></h3>
<p>스크래피 셀렉터로 XPath를 사용할 때 유용한 팁들이
<a class="reference external" href="https://blog.scrapinghub.com/2014/07/17/xpath-tips-from-the-web-scraping-trenches/">ScrapingHub의 블로그 포스트</a>에 있다.
XPath에 아직 익숙하지 않다면 먼저 <a class="reference external" href="http://www.zvon.org/comp/r/tut-XPath_1.html">XPath 튜토리얼</a>을
보는 것도 좋다.</p>
<div class="section" id="id14">
<h4>조건이 있는 텍스트 노드 사용하기<a class="headerlink" href="#id14" title="제목 주소">¶</a></h4>
<p><a class="reference external" href="https://www.w3.org/TR/xpath/#section-String-Functions">XPath string function</a>에 인자로 텍스트 건텐츠를 사용할 필요가 있을 때,
<code class="docutils literal"><span class="pre">.//text()</span></code>사용을 피하고 <code class="docutils literal"><span class="pre">.</span></code>만 사용하라.</p>
<p>왜냐하면 <code class="docutils literal"><span class="pre">.//text()</span></code> 표현은 텍스트 요소의 집합을 생산하기 때문이다 -- <em>노드-세트</em> .
그리고 <code class="docutils literal"><span class="pre">contains()</span></code> 또는 <code class="docutils literal"><span class="pre">starts-with()</span></code> 같은 문자열 함수에 인자로 전달돼서 노드-세트가 문자열로 변환될 때,
첫 번째 요소에 대한 텍스트만 불러온다.</p>
<p>예:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">scrapy</span> <span class="kn">import</span> <span class="n">Selector</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sel</span> <span class="o">=</span> <span class="n">Selector</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;&lt;a href=&quot;#&quot;&gt;Click here to go to the &lt;strong&gt;Next Page&lt;/strong&gt;&lt;/a&gt;&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p><em>노드-세트</em>를 문자열로 변환:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sel</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s1">&#39;//a//text()&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span> <span class="c1"># 노드-셋을 본다</span>
<span class="go">[u&#39;Click here to go to the &#39;, u&#39;Next Page&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sel</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s2">&quot;string(//a[1]//text())&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span> <span class="c1"># 문자열로 변환한다</span>
<span class="go">[u&#39;Click here to go to the &#39;]</span>
</pre></div>
</div>
<p>그러나 문자열로 변환된 <em>노드</em>는 텍스트와 모든 디센던트(descendant)를 합쳐버린다:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sel</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s2">&quot;//a[1]&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span> <span class="c1"># 첫 번째 노드를 선택한다</span>
<span class="go">[u&#39;&lt;a href=&quot;#&quot;&gt;Click here to go to the &lt;strong&gt;Next Page&lt;/strong&gt;&lt;/a&gt;&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sel</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s2">&quot;string(//a[1])&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span> <span class="c1"># 문자열로 변환한다</span>
<span class="go">[u&#39;Click here to go to the Next Page&#39;]</span>
</pre></div>
</div>
<p>따라서, <code class="docutils literal"><span class="pre">.//text()</span></code> 노드-세트를 사용하는 것은 이 경우에 아무것도 선택하지 않는다:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sel</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s2">&quot;//a[contains(.//text(), &#39;Next Page&#39;)]&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
<span class="go">[]</span>
</pre></div>
</div>
<p>하지만 노드를 의미하는 <code class="docutils literal"><span class="pre">.</span></code>를 사용하면 작동한다:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sel</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s2">&quot;//a[contains(., &#39;Next Page&#39;)]&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
<span class="go">[u&#39;&lt;a href=&quot;#&quot;&gt;Click here to go to the &lt;strong&gt;Next Page&lt;/strong&gt;&lt;/a&gt;&#39;]</span>
</pre></div>
</div>
</div>
<div class="section" id="node-1-node-1">
<h4>//node[1]와 (//node)[1]의 차이를 주의하라<a class="headerlink" href="#node-1-node-1" title="제목 주소">¶</a></h4>
<p><code class="docutils literal"><span class="pre">//node[1]</span></code>는 각각의 부모 아래서 처음으로 발생하는 모든 노드를 선택한다.</p>
<p><code class="docutils literal"><span class="pre">(//node)[1]</span></code>는 문서 내에서 모든 노드를 선택하고, 그중 첫 번째만 가져온다.</p>
<p>예:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">scrapy</span> <span class="kn">import</span> <span class="n">Selector</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sel</span> <span class="o">=</span> <span class="n">Selector</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="go">....:     &lt;ul class=&quot;list&quot;&gt;</span>
<span class="go">....:         &lt;li&gt;1&lt;/li&gt;</span>
<span class="go">....:         &lt;li&gt;2&lt;/li&gt;</span>
<span class="go">....:         &lt;li&gt;3&lt;/li&gt;</span>
<span class="go">....:     &lt;/ul&gt;</span>
<span class="go">....:     &lt;ul class=&quot;list&quot;&gt;</span>
<span class="go">....:         &lt;li&gt;4&lt;/li&gt;</span>
<span class="go">....:         &lt;li&gt;5&lt;/li&gt;</span>
<span class="go">....:         &lt;li&gt;6&lt;/li&gt;</span>
<span class="go">....:     &lt;/ul&gt;&quot;&quot;&quot;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xp</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">sel</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
</pre></div>
</div>
<p>아래는 부모에 상관없이 모든 첫 번째 <code class="docutils literal"><span class="pre">&lt;li&gt;</span></code> 요소를 가져온다:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">xp</span><span class="p">(</span><span class="s2">&quot;//li[1]&quot;</span><span class="p">)</span>
<span class="go">[u&#39;&lt;li&gt;1&lt;/li&gt;&#39;, u&#39;&lt;li&gt;4&lt;/li&gt;&#39;]</span>
</pre></div>
</div>
<p>그리고 아래는 전체 문서의 첫 번째 <code class="docutils literal"><span class="pre">&lt;li&gt;</span></code> 요소만 가져온다:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">xp</span><span class="p">(</span><span class="s2">&quot;(//li)[1]&quot;</span><span class="p">)</span>
<span class="go">[u&#39;&lt;li&gt;1&lt;/li&gt;&#39;]</span>
</pre></div>
</div>
<p>아래는 <code class="docutils literal"><span class="pre">&lt;ul&gt;</span></code> 부모 아래 있는 모든 첫 번째 <code class="docutils literal"><span class="pre">&lt;li&gt;</span></code> 요소만 가지고 온다:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">xp</span><span class="p">(</span><span class="s2">&quot;//ul/li[1]&quot;</span><span class="p">)</span>
<span class="go">[u&#39;&lt;li&gt;1&lt;/li&gt;&#39;, u&#39;&lt;li&gt;4&lt;/li&gt;&#39;]</span>
</pre></div>
</div>
<p>그리고 아래는 전체 문서의 <code class="docutils literal"><span class="pre">&lt;ul&gt;</span></code> 부모 아래 있는 첫 번째 <code class="docutils literal"><span class="pre">&lt;li&gt;</span></code> 요소만 가지고 온다:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">xp</span><span class="p">(</span><span class="s2">&quot;(//ul/li)[1]&quot;</span><span class="p">)</span>
<span class="go">[u&#39;&lt;li&gt;1&lt;/li&gt;&#39;]</span>
</pre></div>
</div>
</div>
<div class="section" id="id15">
<h4>클래스로 쿼리 할 때, CSS 사용을 고려하라<a class="headerlink" href="#id15" title="제목 주소">¶</a></h4>
<p>요소가 여러 CSS 클래스를 포함할 수 있기 때문에, 클래스로 요소를 선택하는 XPath 방식은
다소 장황하다:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="o">*</span><span class="p">[</span><span class="n">contains</span><span class="p">(</span><span class="n">concat</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">normalize</span><span class="o">-</span><span class="n">space</span><span class="p">(</span><span class="nd">@class</span><span class="p">),</span> <span class="s1">&#39; &#39;</span><span class="p">),</span> <span class="s1">&#39; someclass &#39;</span><span class="p">)]</span>
</pre></div>
</div>
<p>만약 <code class="docutils literal"><span class="pre">&#64;class='someclass'</span></code>로 쓴다면 다른 클래스를 가진 요소를 놓치게 될 것이다.
그리고 <code class="docutils literal"><span class="pre">contains(&#64;class,</span> <span class="pre">'someclass')</span></code>로 쓰면 <code class="docutils literal"><span class="pre">someclass</span></code> 문자열을 공유하는 다른
클래스 이름이 있으면 원하는 것 보다 많은 요소를 얻게 된다.</p>
<p>스크래피 셀렉터는 셀렉터를 연결시켜서 사용할 수 있기 때문에, 대부분의 경우 CSS를 사용해
클래스로 선택을 한 다음 필요할 때 XPath로 전환하면 된다:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">scrapy</span> <span class="kn">import</span> <span class="n">Selector</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sel</span> <span class="o">=</span> <span class="n">Selector</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;&lt;div class=&quot;hero shout&quot;&gt;&lt;time datetime=&quot;2014-07-23 19:00&quot;&gt;Special date&lt;/time&gt;&lt;/div&gt;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sel</span><span class="o">.</span><span class="n">css</span><span class="p">(</span><span class="s1">&#39;.shout&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s1">&#39;./time/@datetime&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
<span class="go">[u&#39;2014-07-23 19:00&#39;]</span>
</pre></div>
</div>
<p>이것은 위의 장황한 XPath 트릭을 사용하는 것 보다 훨씬 깔끔하다.
단지 뒤따르는 XPath 표현식에서 <code class="docutils literal"><span class="pre">.</span></code>를 사용하는 것을 기억하라.</p>
</div>
</div>
</div>
<div class="section" id="module-scrapy.selector">
<span id="id16"></span><span id="topics-selectors-ref"></span><h2>내장 셀렉터 레퍼런스<a class="headerlink" href="#module-scrapy.selector" title="제목 주소">¶</a></h2>
<div class="section" id="id17">
<h3>Selector 객체<a class="headerlink" href="#id17" title="제목 주소">¶</a></h3>
<dl class="class">
<dt id="scrapy.selector.Selector">
<em class="property">class </em><code class="descclassname">scrapy.selector.</code><code class="descname">Selector</code><span class="sig-paren">(</span><em>response=None</em>, <em>text=None</em>, <em>type=None</em><span class="sig-paren">)</span><a class="headerlink" href="#scrapy.selector.Selector" title="정의 주소">¶</a></dt>
<dd><p><a class="reference internal" href="#scrapy.selector.Selector" title="scrapy.selector.Selector"><code class="xref py py-class docutils literal"><span class="pre">Selector</span></code></a> 인스턴스는 리스펀스의 래퍼(wrapper)로 컨텐츠의 특정 부분을 선택하게 해준다.</p>
<p><code class="docutils literal"><span class="pre">response</span></code>는 데이터 선택이나 추출에 사용될 <a class="reference internal" href="request-response_ko.html#scrapy.http.HtmlResponse" title="scrapy.http.HtmlResponse"><code class="xref py py-class docutils literal"><span class="pre">HtmlResponse</span></code></a> 또는
<a class="reference internal" href="request-response_ko.html#scrapy.http.XmlResponse" title="scrapy.http.XmlResponse"><code class="xref py py-class docutils literal"><span class="pre">XmlResponse</span></code></a> 객체다.</p>
<p><code class="docutils literal"><span class="pre">text</span></code>는 유니코드 문자열이고 <code class="docutils literal"><span class="pre">response</span></code>가 사용 불가능할 때는 utf-8로 인코딩 텍스트가 된다.
<code class="docutils literal"><span class="pre">text</span></code>와 <code class="docutils literal"><span class="pre">response</span></code> 같이 사용하는 것은 정의되지 않은 동작이다.</p>
<p><code class="docutils literal"><span class="pre">type</span></code>는 셀렉터 타입을 정의한다. <code class="docutils literal"><span class="pre">&quot;html&quot;</span></code>, <code class="docutils literal"><span class="pre">&quot;xml&quot;</span></code> 또는 <code class="docutils literal"><span class="pre">None</span></code> (기본)이 될 수 있다.</p>
<blockquote>
<div><p>만약 <code class="docutils literal"><span class="pre">type</span></code>이 <code class="docutils literal"><span class="pre">None</span></code>이면, 셀렉터는 자동으로 최선의 타입(type)을 <code class="docutils literal"><span class="pre">response</span></code> 타입에
기반해 고르며(아래를 참고하라), <code class="docutils literal"><span class="pre">text</span></code>와 같이 쓰이는 경우는 <code class="docutils literal"><span class="pre">&quot;html&quot;</span></code>이 기본으로
설정되어 있다.</p>
<p><code class="docutils literal"><span class="pre">type</span></code>이 <code class="docutils literal"><span class="pre">None</span></code>이고 <code class="docutils literal"><span class="pre">response</span></code>가 전달 되었으면, 셀렉터 타입은 아래처럼
리스펀스 타입에 따라 추정된다:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="request-response_ko.html#scrapy.http.HtmlResponse" title="scrapy.http.HtmlResponse"><code class="xref py py-class docutils literal"><span class="pre">HtmlResponse</span></code></a> 타입의 경우 <code class="docutils literal"><span class="pre">&quot;html&quot;</span></code></li>
<li><a class="reference internal" href="request-response_ko.html#scrapy.http.XmlResponse" title="scrapy.http.XmlResponse"><code class="xref py py-class docutils literal"><span class="pre">XmlResponse</span></code></a> 타입의 경우 <code class="docutils literal"><span class="pre">&quot;xml&quot;</span></code></li>
<li>그 이외의 타입의 경우 <code class="docutils literal"><span class="pre">&quot;html&quot;</span></code></li>
</ul>
</div></blockquote>
<p>이외의 경우에 <code class="docutils literal"><span class="pre">type</span></code>이 설정되어 있으면, 셀렉터 타입이 강제되어 탐색이 일어나지 않을 수 있다.</p>
</div></blockquote>
<dl class="method">
<dt id="scrapy.selector.Selector.xpath">
<code class="descname">xpath</code><span class="sig-paren">(</span><em>query</em><span class="sig-paren">)</span><a class="headerlink" href="#scrapy.selector.Selector.xpath" title="정의 주소">¶</a></dt>
<dd><p>xpath <code class="docutils literal"><span class="pre">query</span></code>와 매치되는 노드를 찾고 일자화된(flattened) 모든 요소를 포함한
<a class="reference internal" href="#scrapy.selector.SelectorList" title="scrapy.selector.SelectorList"><code class="xref py py-class docutils literal"><span class="pre">SelectorList</span></code></a> 인스턴스를 결과로 반환한다. 리스트 요소 또한
<a class="reference internal" href="#scrapy.selector.Selector" title="scrapy.selector.Selector"><code class="xref py py-class docutils literal"><span class="pre">Selector</span></code></a> 인터페이스를 구현하고 있다.</p>
<p><code class="docutils literal"><span class="pre">query</span></code>는 문자열로 사용할 XPATH 쿼리를 포함하고 있다.</p>
<div class="admonition note">
<p class="first admonition-title">주석</p>
<p class="last">편의를 위해, 이 메서드는 <code class="docutils literal"><span class="pre">response.xpath()</span></code>로 호출될 수 있다.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="scrapy.selector.Selector.css">
<code class="descname">css</code><span class="sig-paren">(</span><em>query</em><span class="sig-paren">)</span><a class="headerlink" href="#scrapy.selector.Selector.css" title="정의 주소">¶</a></dt>
<dd><p>주어진 CSS 셀렉터를 적용하고 <a class="reference internal" href="#scrapy.selector.SelectorList" title="scrapy.selector.SelectorList"><code class="xref py py-class docutils literal"><span class="pre">SelectorList</span></code></a> 인스턴스를 반환한다.</p>
<p><code class="docutils literal"><span class="pre">query</span></code>는 사용할 CSS 셀렉터를 포함하고 있는 문자열이다.</p>
<p>뒷단에서, CSS 쿼리는 <a class="reference external" href="https://pypi.python.org/pypi/cssselect/">cssselect</a> 라이브러리를 사용해서 XPath 쿼리로 변경되고
<code class="docutils literal"><span class="pre">.xpath()</span></code> 메서드를 실행한다.</p>
<div class="admonition note">
<p class="first admonition-title">주석</p>
<p class="last">편의를 위해 이 메서드는 <code class="docutils literal"><span class="pre">response.css()</span></code>로 호출된다.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="scrapy.selector.Selector.extract">
<code class="descname">extract</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#scrapy.selector.Selector.extract" title="정의 주소">¶</a></dt>
<dd><p>매치된 노드를 유니코드 문자열 리스트로 직렬화(serialize)하고 반환한다.
퍼센트 인코딩된 컨텐츠는 인용부호가 없다.</p>
</dd></dl>

<dl class="method">
<dt id="scrapy.selector.Selector.re">
<code class="descname">re</code><span class="sig-paren">(</span><em>regex</em><span class="sig-paren">)</span><a class="headerlink" href="#scrapy.selector.Selector.re" title="정의 주소">¶</a></dt>
<dd><blockquote>
<div><p>주어진 정규표현식을 적용하고 칠치하는 유니코드 문자열의 리스트를 반환한다.</p>
<p><code class="docutils literal"><span class="pre">regex</span></code>는 컴파일된 정규표현식이나 문자열이면 된다. 문자열은
<code class="docutils literal"><span class="pre">re.compile(regex)</span></code>를 사용해 정규 표현식으로 컴파일된다.</p>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">주석</p>
<p class="last"><code class="docutils literal"><span class="pre">re()</span></code>와 <code class="docutils literal"><span class="pre">re_first()</span></code>는 모두 HTML 엔티티(entity)를 디코딩한다. (<code class="docutils literal"><span class="pre">&amp;lt;</span></code>, <code class="docutils literal"><span class="pre">&amp;amp;</span></code> 제외)</p>
</div>
</dd></dl>

<dl class="method">
<dt id="scrapy.selector.Selector.register_namespace">
<code class="descname">register_namespace</code><span class="sig-paren">(</span><em>prefix</em>, <em>uri</em><span class="sig-paren">)</span><a class="headerlink" href="#scrapy.selector.Selector.register_namespace" title="정의 주소">¶</a></dt>
<dd><p><a class="reference internal" href="#scrapy.selector.Selector" title="scrapy.selector.Selector"><code class="xref py py-class docutils literal"><span class="pre">Selector</span></code></a>에서 사용될 주어진 네임스페이스(name space)를 등록한다.
네임스페이스를 등록하지 않으면 비표준 네임스페이스로부터 데이터를 추출하거나
선택할 수 없다. 아래의 예제를 참고하라.</p>
</dd></dl>

<dl class="method">
<dt id="scrapy.selector.Selector.remove_namespaces">
<code class="descname">remove_namespaces</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#scrapy.selector.Selector.remove_namespaces" title="정의 주소">¶</a></dt>
<dd><p>모든 네임스페이스를 제거하고, 네임스페이스 없는 xpath를 사용해서 문서를 돌아다니게 해준다.
아래의 예제를 참고하라.</p>
</dd></dl>

<dl class="method">
<dt id="scrapy.selector.Selector.__nonzero__">
<code class="descname">__nonzero__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#scrapy.selector.Selector.__nonzero__" title="정의 주소">¶</a></dt>
<dd><p>선택된 실제 컨텐츠가 있으면 <code class="docutils literal"><span class="pre">True</span></code>를 반환하고 그렇지 않은 경우에는 <code class="docutils literal"><span class="pre">False</span></code>를
반환한다. 즉, <a class="reference internal" href="#scrapy.selector.Selector" title="scrapy.selector.Selector"><code class="xref py py-class docutils literal"><span class="pre">Selector</span></code></a>의 불리언(Boolean) 값은 셀렉터가 선택하는
컨텐츠에 따라 달라진다.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="selectorlist">
<h3>SelectorList 객체<a class="headerlink" href="#selectorlist" title="제목 주소">¶</a></h3>
<dl class="class">
<dt id="scrapy.selector.SelectorList">
<em class="property">class </em><code class="descclassname">scrapy.selector.</code><code class="descname">SelectorList</code><a class="headerlink" href="#scrapy.selector.SelectorList" title="정의 주소">¶</a></dt>
<dd><p><a class="reference internal" href="#scrapy.selector.SelectorList" title="scrapy.selector.SelectorList"><code class="xref py py-class docutils literal"><span class="pre">SelectorList</span></code></a> 클래스는 내장 <code class="docutils literal"><span class="pre">list</span></code> 클래스의 상속 클래스로 추가적인 메서드를
제공한다.</p>
<dl class="method">
<dt id="scrapy.selector.SelectorList.xpath">
<code class="descname">xpath</code><span class="sig-paren">(</span><em>query</em><span class="sig-paren">)</span><a class="headerlink" href="#scrapy.selector.SelectorList.xpath" title="정의 주소">¶</a></dt>
<dd><p>리스트에 있는 각 요소에 대해 <code class="docutils literal"><span class="pre">.xpath()</span></code> 메서드를 호출하고 일자화된 결과를 또다른 <a class="reference internal" href="#scrapy.selector.SelectorList" title="scrapy.selector.SelectorList"><code class="xref py py-class docutils literal"><span class="pre">SelectorList</span></code></a>로
반환한다.</p>
<p><code class="docutils literal"><span class="pre">query</span></code>는 <a class="reference internal" href="#scrapy.selector.Selector.xpath" title="scrapy.selector.Selector.xpath"><code class="xref py py-meth docutils literal"><span class="pre">Selector.xpath()</span></code></a>에 있는 인자와 같다.</p>
</dd></dl>

<dl class="method">
<dt id="scrapy.selector.SelectorList.css">
<code class="descname">css</code><span class="sig-paren">(</span><em>query</em><span class="sig-paren">)</span><a class="headerlink" href="#scrapy.selector.SelectorList.css" title="정의 주소">¶</a></dt>
<dd><p>리스트에 있는 각 요소에 대해 <code class="docutils literal"><span class="pre">.css()</span></code> 메서드를 호출하고 일자화된 결과를 또다른 <a class="reference internal" href="#scrapy.selector.SelectorList" title="scrapy.selector.SelectorList"><code class="xref py py-class docutils literal"><span class="pre">SelectorList</span></code></a>로
반환한다.</p>
<p><code class="docutils literal"><span class="pre">query</span></code> <a class="reference internal" href="#scrapy.selector.Selector.css" title="scrapy.selector.Selector.css"><code class="xref py py-meth docutils literal"><span class="pre">Selector.css()</span></code></a>에 있는 인자와 같다.</p>
</dd></dl>

<dl class="method">
<dt id="scrapy.selector.SelectorList.extract">
<code class="descname">extract</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#scrapy.selector.SelectorList.extract" title="정의 주소">¶</a></dt>
<dd><p>리스트에 있는 각 요소에 대해 <code class="docutils literal"><span class="pre">.extract()</span></code> 메서드를 호출하고 일자화된 유니코드 문자열 리스트를 반환한다.</p>
</dd></dl>

<dl class="method">
<dt id="scrapy.selector.SelectorList.re">
<code class="descname">re</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#scrapy.selector.SelectorList.re" title="정의 주소">¶</a></dt>
<dd><p>리스트에 있는 각 요소에 대해 <code class="docutils literal"><span class="pre">.re()</span></code> 메서드를 호출하고 일자화된 유니코드 문자열 리스트를 반환한다.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="html">
<h3>HTML 리스펀스에 관한 셀렉터 예시<a class="headerlink" href="#html" title="제목 주소">¶</a></h3>
<p>이 섹션에는 여러 개념을 설명하기 위한 몇 가지 <a class="reference internal" href="#scrapy.selector.Selector" title="scrapy.selector.Selector"><code class="xref py py-class docutils literal"><span class="pre">Selector</span></code></a> 예시가 있다.
모든 예시에서 <a class="reference internal" href="request-response_ko.html#scrapy.http.HtmlResponse" title="scrapy.http.HtmlResponse"><code class="xref py py-class docutils literal"><span class="pre">HtmlResponse</span></code></a>를 받아 인스턴스화된 <a class="reference internal" href="#scrapy.selector.Selector" title="scrapy.selector.Selector"><code class="xref py py-class docutils literal"><span class="pre">Selector</span></code></a>가
이미 존재한다고 가정한다:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">sel</span> <span class="o">=</span> <span class="n">Selector</span><span class="p">(</span><span class="n">html_response</span><span class="p">)</span>
</pre></div>
</div>
<ol class="arabic">
<li><p class="first">HTML 리스펀스 본문(body)로부터 모든 <code class="docutils literal"><span class="pre">&lt;h1&gt;</span></code> 요소를 선택하고, <a class="reference internal" href="#scrapy.selector.Selector" title="scrapy.selector.Selector"><code class="xref py py-class docutils literal"><span class="pre">Selector</span></code></a> 객체 리스트를
반환한다. (<a class="reference internal" href="#scrapy.selector.SelectorList" title="scrapy.selector.SelectorList"><code class="xref py py-class docutils literal"><span class="pre">SelectorList</span></code></a> 객체):</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">sel</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s2">&quot;//h1&quot;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">HTML 리스펀스 폰문으로부터 모든 <code class="docutils literal"><span class="pre">&lt;h1&gt;</span></code> 요소의 텍스트를 추출하고 유니코드 문자열
리스트를 반환한다:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">sel</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s2">&quot;//h1&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>         <span class="c1"># this includes the h1 tag</span>
<span class="n">sel</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s2">&quot;//h1/text()&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>  <span class="c1"># this excludes the h1 tag</span>
</pre></div>
</div>
</li>
<li><p class="first">모든``&lt;p&gt;`` 태그에 대해서 반복해서 각각의 클래스 속성을 출력한다:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">sel</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s2">&quot;//p&quot;</span><span class="p">):</span>
    <span class="k">print</span> <span class="n">node</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s2">&quot;@class&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="xml">
<h3>XML 리스펀스에 관한 셀렉터 예시<a class="headerlink" href="#xml" title="제목 주소">¶</a></h3>
<p>이 섹션에는 여러가지 개념을 설명하기 위한 몇 가지 예제가 있다. 두 경우 모두In both cases we
<a class="reference internal" href="request-response_ko.html#scrapy.http.XmlResponse" title="scrapy.http.XmlResponse"><code class="xref py py-class docutils literal"><span class="pre">XmlResponse</span></code></a>로 인스턴스화한 <a class="reference internal" href="#scrapy.selector.Selector" title="scrapy.selector.Selector"><code class="xref py py-class docutils literal"><span class="pre">Selector</span></code></a>가 이미 존재한다고
가정한다:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">sel</span> <span class="o">=</span> <span class="n">Selector</span><span class="p">(</span><span class="n">xml_response</span><span class="p">)</span>
</pre></div>
</div>
<ol class="arabic">
<li><p class="first">모든 <code class="docutils literal"><span class="pre">&lt;product&gt;</span></code> 요소를 XML 리스펀스 본문으로부터 선택하고, <a class="reference internal" href="#scrapy.selector.Selector" title="scrapy.selector.Selector"><code class="xref py py-class docutils literal"><span class="pre">Selector</span></code></a> 객체 리스트를
반환한다. (<a class="reference internal" href="#scrapy.selector.SelectorList" title="scrapy.selector.SelectorList"><code class="xref py py-class docutils literal"><span class="pre">SelectorList</span></code></a> 객체):</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">sel</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s2">&quot;//product&quot;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">네임스페이스 등록을 필요로하는 <a class="reference external" href="https://support.google.com/merchants/answer/160589?hl=en&amp;ref_topic=2473799">Google Base XML feed</a> 에서 모든 가격을 추출한다:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">sel</span><span class="o">.</span><span class="n">register_namespace</span><span class="p">(</span><span class="s2">&quot;g&quot;</span><span class="p">,</span> <span class="s2">&quot;http://base.google.com/ns/1.0&quot;</span><span class="p">)</span>
<span class="n">sel</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s2">&quot;//g:price&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="removing-namespaces">
<span id="id18"></span><h3>네임스페이스 제거<a class="headerlink" href="#removing-namespaces" title="제목 주소">¶</a></h3>
<p>스크래핑 프로젝트를 다룰 때, 네임스페이스를 완전히 제거하고 요소 이름으로만 작업하는 것이
더 단순하고 편리한 XPath를 작성하기에 꽤 편할 떄가 있다.
이를 위해서 <a class="reference internal" href="#scrapy.selector.Selector.remove_namespaces" title="scrapy.selector.Selector.remove_namespaces"><code class="xref py py-meth docutils literal"><span class="pre">Selector.remove_namespaces()</span></code></a> 메서드를 사용할 수 있다.</p>
<p>GitHub 블로그 아톰 피드(atom feed)로 이를 설명하는 예시를 보자.</p>
<p>우선, 스크랩하려는 url로 셀을 열었다:</p>
<div class="highlight-sh"><div class="highlight"><pre><span></span>$ scrapy shell https://github.com/blog.atom
</pre></div>
</div>
<p>셸에서 모든 <code class="docutils literal"><span class="pre">&lt;link&gt;</span></code> 객체를 선택하려고 시도하면 이것이 작동하지 않는 것을
볼 수 있다 (왜냐하면 Atom XML 네입스페이스는 노드를 혼란스럽게 만들고 있기 때문이다):</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s2">&quot;//link&quot;</span><span class="p">)</span>
<span class="go">[]</span>
</pre></div>
</div>
<p>하지만 일단 <a class="reference internal" href="#scrapy.selector.Selector.remove_namespaces" title="scrapy.selector.Selector.remove_namespaces"><code class="xref py py-meth docutils literal"><span class="pre">Selector.remove_namespaces()</span></code></a> 메서드를 호출하면, 모든
노드는 자신의 이름으로 바로 접근할 수가 있다:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="o">.</span><span class="n">selector</span><span class="o">.</span><span class="n">remove_namespaces</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s2">&quot;//link&quot;</span><span class="p">)</span>
<span class="go">[&lt;Selector xpath=&#39;//link&#39; data=u&#39;&lt;link xmlns=&quot;http://www.w3.org/2005/Atom&#39;&gt;,</span>
<span class="go"> &lt;Selector xpath=&#39;//link&#39; data=u&#39;&lt;link xmlns=&quot;http://www.w3.org/2005/Atom&#39;&gt;,</span>
<span class="go"> ...</span>
</pre></div>
</div>
<p>네임스페이스 제거 과정을 직접 호출하는 대신에 항상 기본으로 호출되지 않게 해놨는지 궁금하다면
이는 두 가지 이유 때문이다. 관련성 순서대로:</p>
<ol class="arabic simple">
<li>네임스페이스를 제거하는 것은 문서에 있는 모든 노드를 수정하고 반복하는 것을 요구한다.
이는 스크래피로 크롤링되는 문서에 대해 수행하기에는 상당히 비용이 많이 드는
작업이다.</li>
<li>네임스페이스가 실제로 필요한 경우가 있을 수 있다.
그 경우 몇 요소의 이름은 네임스페이스 사이에서 충돌을 일으킨다. 이런 경우는
매우 드물기는 하다.</li>
</ol>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2008-2016, Scrapy developers.
      최종 업데이트: 2월 26, 2018

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.5.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/translations.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 
<script type="text/javascript">
!function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.1.0";
analytics.load("8UDQfnf3cyFSTsM4YANnW5sXmgZVILbA");
analytics.page();
}}();

analytics.ready(function () {
    ga('require', 'linker');
    ga('linker:autoLink', ['scrapinghub.com', 'crawlera.com']);
});
</script>


</body>
</html>